!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/keycodes"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/common"),require("@angular/forms"),require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("ng-zorro-antd/core")):"function"==typeof define&&define.amd?define("ng-zorro-antd/auto-complete",["exports","@angular/cdk/keycodes","@angular/cdk/overlay","@angular/cdk/portal","@angular/common","@angular/forms","@angular/core","rxjs","rxjs/operators","ng-zorro-antd/core"],e):e((t["ng-zorro-antd"]=t["ng-zorro-antd"]||{},t["ng-zorro-antd"]["auto-complete"]={}),t.ng.cdk.keycodes,t.ng.cdk.overlay,t.ng.cdk.portal,t.ng.common,t.ng.forms,t.ng.core,t.rxjs,t.rxjs.operators,t["ng-zorro-antd"].core)}(this,function(t,o,e,n,i,s,r,a,c,l){"use strict";var p=function(){function t(){}return t.decorators=[{type:r.Component,args:[{selector:"nz-auto-optgroup",exportAs:"nzAutoOptgroup",preserveWhitespaces:!1,changeDetection:r.ChangeDetectionStrategy.OnPush,encapsulation:r.ViewEncapsulation.None,template:'<div class="ant-select-dropdown-menu-item-group-title">\n  <ng-container *nzStringTemplateOutlet="nzLabel">{{nzLabel}}</ng-container>\n</div>\n<ul class="ant-select-dropdown-menu-item-group-list">\n  <ng-content select="nz-auto-option"></ng-content>\n</ul>\n',host:{role:"group","class":"ant-select-dropdown-menu-item-group"}}]}],t.ctorParameters=function(){return[]},t.propDecorators={nzLabel:[{type:r.Input}]},t}();function u(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(r=(s<3?i(r):3<s?i(e,n,r):i(e,n))||r);return 3<s&&r&&Object.defineProperty(e,n,r),r}function h(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,s=n.call(t),r=[];try{for(;(void 0===e||0<e--)&&!(o=s.next()).done;)r.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=s["return"])&&n.call(s)}finally{if(i)throw i.error}}return r}var m=function O(t,e){void 0===e&&(e=!1),this.source=t,this.isUserInput=e},g=function(){function t(t,e){this.changeDetectorRef=t,this.element=e,this.nzDisabled=!1,this.selectionChange=new r.EventEmitter,this.active=!1,this.selected=!1}return t.prototype.select=function(){this.selected=!0,this.changeDetectorRef.markForCheck(),this.emitSelectionChangeEvent()},t.prototype.deselect=function(){this.selected=!1,this.changeDetectorRef.markForCheck(),this.emitSelectionChangeEvent()},t.prototype.getLabel=function(){return this.nzLabel||this.nzValue.toString()},t.prototype.setActiveStyles=function(){this.active||(this.active=!0,this.changeDetectorRef.markForCheck())},t.prototype.setInactiveStyles=function(){this.active&&(this.active=!1,this.changeDetectorRef.markForCheck())},t.prototype.scrollIntoViewIfNeeded=function(){l.scrollIntoView(this.element.nativeElement)},t.prototype.selectViaInteraction=function(){this.nzDisabled||(this.selected=!this.selected,this.selected?this.setActiveStyles():this.setInactiveStyles(),this.emitSelectionChangeEvent(!0),this.changeDetectorRef.markForCheck())},t.prototype.emitSelectionChangeEvent=function(t){void 0===t&&(t=!1),this.selectionChange.emit(new m(this,t))},t.decorators=[{type:r.Component,args:[{selector:"nz-auto-option",exportAs:"nzAutoOption",preserveWhitespaces:!1,changeDetection:r.ChangeDetectionStrategy.OnPush,encapsulation:r.ViewEncapsulation.None,template:"<ng-content></ng-content>",host:{role:"menuitem","class":"ant-select-dropdown-menu-item","[class.ant-select-dropdown-menu-item-selected]":"selected","[class.ant-select-dropdown-menu-item-active]":"active","[class.ant-select-dropdown-menu-item-disabled]":"nzDisabled","[attr.aria-selected]":"selected.toString()","[attr.aria-disabled]":"nzDisabled.toString()","(click)":"selectViaInteraction()","(mousedown)":"$event.preventDefault()"}}]}],t.ctorParameters=function(){return[{type:r.ChangeDetectorRef},{type:r.ElementRef}]},t.propDecorators={nzValue:[{type:r.Input}],nzLabel:[{type:r.Input}],nzDisabled:[{type:r.Input}],selectionChange:[{type:r.Output}]},u([l.InputBoolean(),h("design:type",Object)],t.prototype,"nzDisabled",void 0),t}(),f={provide:s.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return v}),multi:!0};function y(){return Error("Attempting to open an undefined instance of `nz-autocomplete`. Make sure that the id passed to the `nzAutocomplete` is correct and that you're attempting to open it after the ngAfterContentInit hook.")}var v=function(){function t(t,e,n,o){this.elementRef=t,this._overlay=e,this.viewContainerRef=n,this.document=o,this._onChange=function(){},this._onTouched=function(){},this.panelOpen=!1}return Object.defineProperty(t.prototype,"activeOption",{get:function(){if(this.nzAutocomplete&&this.nzAutocomplete.options.length)return this.nzAutocomplete.activeItem},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.destroyPanel()},t.prototype.writeValue=function(t){this.setTriggerValue(t)},t.prototype.registerOnChange=function(t){this._onChange=t},t.prototype.registerOnTouched=function(t){this._onTouched=t},t.prototype.setDisabledState=function(t){this.elementRef.nativeElement.disabled=t,this.closePanel()},t.prototype.openPanel=function(){this.attachOverlay()},t.prototype.closePanel=function(){this.panelOpen&&(this.nzAutocomplete.isOpen=this.panelOpen=!1,this.overlayRef&&this.overlayRef.hasAttached()&&(this.selectionChangeSubscription.unsubscribe(),this.overlayBackdropClickSubscription.unsubscribe(),this.overlayPositionChangeSubscription.unsubscribe(),this.optionsChangeSubscription.unsubscribe(),this.overlayRef.detach(),this.overlayRef=null,this.portal=null))},t.prototype.handleKeydown=function(t){var e=t.keyCode,n=e===o.UP_ARROW||e===o.DOWN_ARROW;e===o.ESCAPE&&t.preventDefault(),!this.panelOpen||e!==o.ESCAPE&&e!==o.TAB?this.panelOpen&&e===o.ENTER?this.nzAutocomplete.showPanel&&this.activeOption&&(t.preventDefault(),this.activeOption.selectViaInteraction()):this.panelOpen&&n&&this.nzAutocomplete.showPanel&&(t.stopPropagation(),t.preventDefault(),e===o.UP_ARROW?this.nzAutocomplete.setPreviousItemActive():this.nzAutocomplete.setNextItemActive(),this.activeOption&&this.activeOption.scrollIntoViewIfNeeded(),this.doBackfill()):(this.activeOption&&this.activeOption.getLabel()!==this.previousValue&&this.setTriggerValue(this.previousValue),this.closePanel())},t.prototype.handleInput=function(t){var e=t.target,n=e.value;"number"===e.type&&(n=""===n?null:parseFloat(n)),this.canOpen()&&document.activeElement===t.target&&this.previousValue!==n&&(this.previousValue=n,this._onChange(n),this.openPanel())},t.prototype.handleFocus=function(){this.canOpen()&&(this.previousValue=this.elementRef.nativeElement.value,this.openPanel())},t.prototype.handleBlur=function(){this.closePanel(),this._onTouched()},t.prototype.subscribeOptionsChange=function(){var t=this;return this.nzAutocomplete.options.changes.pipe(c.delay(0)).subscribe(function(){t.resetActiveItem()})},t.prototype.subscribeSelectionChange=function(){var e=this;return this.nzAutocomplete.selectionChange.subscribe(function(t){e.setValueAndClose(t)})},t.prototype.subscribeOverlayBackdropClick=function(){var n=this;return a.merge(a.fromEvent(this.document,"click"),a.fromEvent(this.document,"touchend")).subscribe(function(t){var e=t.target;e!==n.elementRef.nativeElement&&!n.overlayRef.overlayElement.contains(e)&&n.panelOpen&&n.closePanel()})},t.prototype.subscribeOverlayPositionChange=function(){var e=this;return this.positionStrategy.positionChanges.pipe(c.map(function(t){return t.connectionPair.originY}),c.distinct()).subscribe(function(t){e.nzAutocomplete.dropDownPosition=t})},t.prototype.attachOverlay=function(){var t=this;if(!this.nzAutocomplete)throw y();this.portal||(this.portal=new n.TemplatePortal(this.nzAutocomplete.template,this.viewContainerRef)),this.overlayRef||(this.overlayRef=this._overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayPositionChangeSubscription=this.subscribeOverlayPositionChange(),this.selectionChangeSubscription=this.subscribeSelectionChange(),this.overlayBackdropClickSubscription=this.subscribeOverlayBackdropClick(),this.optionsChangeSubscription=this.subscribeOptionsChange()),this.nzAutocomplete.isOpen=this.panelOpen=!0,this.nzAutocomplete.setVisibility(),this.overlayRef.updateSize({width:this.nzAutocomplete.nzWidth||this.getHostWidth()}),setTimeout(function(){t.overlayRef&&t.overlayRef.updatePosition()},150),this.resetActiveItem(),this.activeOption&&this.activeOption.scrollIntoViewIfNeeded()},t.prototype.destroyPanel=function(){this.overlayRef&&this.closePanel()},t.prototype.getOverlayConfig=function(){return new e.OverlayConfig({positionStrategy:this.getOverlayPosition(),scrollStrategy:this._overlay.scrollStrategies.reposition(),width:this.nzAutocomplete.nzWidth||this.getHostWidth()})},t.prototype.getConnectedElement=function(){return this.elementRef},t.prototype.getHostWidth=function(){return this.getConnectedElement().nativeElement.getBoundingClientRect().width},t.prototype.getOverlayPosition=function(){var t=[new e.ConnectionPositionPair({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new e.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this.positionStrategy=this._overlay.position().flexibleConnectedTo(this.getConnectedElement()).withPositions(t).withFlexibleDimensions(!1).withPush(!1),this.positionStrategy},t.prototype.resetActiveItem=function(){var t=this.nzAutocomplete.getOptionIndex(this.nzAutocomplete.activeItem);this.nzAutocomplete.activeItem&&-1!==t?this.nzAutocomplete.setActiveItem(t):this.nzAutocomplete.setActiveItem(this.nzAutocomplete.nzDefaultActiveFirstOption?0:-1)},t.prototype.setValueAndClose=function(t){var e=t.nzValue;this.setTriggerValue(t.getLabel()),this._onChange(e),this.elementRef.nativeElement.focus(),this.closePanel()},t.prototype.setTriggerValue=function(t){this.elementRef.nativeElement.value=t||""},t.prototype.doBackfill=function(){this.nzAutocomplete.nzBackfill&&this.nzAutocomplete.activeItem&&this.setTriggerValue(this.nzAutocomplete.activeItem.getLabel())},t.prototype.canOpen=function(){var t=this.elementRef.nativeElement;return!t.readOnly&&!t.disabled},t.decorators=[{type:r.Directive,args:[{selector:"input[nzAutocomplete], textarea[nzAutocomplete]",exportAs:"nzAutocompleteTrigger",providers:[f],host:{autocomplete:"off","aria-autocomplete":"list","(focusin)":"handleFocus()","(blur)":"handleBlur()","(input)":"handleInput($event)","(keydown)":"handleKeydown($event)"}}]}],t.ctorParameters=function(){return[{type:r.ElementRef},{type:e.Overlay},{type:r.ViewContainerRef},{type:undefined,decorators:[{type:r.Optional},{type:r.Inject,args:[i.DOCUMENT]}]}]},t.propDecorators={nzAutocomplete:[{type:r.Input}]},t}(),b=function(){function t(t,e,n){var o=this;this.changeDetectorRef=t,this.ngZone=e,this.noAnimation=n,this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzDefaultActiveFirstOption=!0,this.nzBackfill=!1,this.selectionChange=new r.EventEmitter,this.showPanel=!1,this.isOpen=!1,this.dropDownPosition="bottom",this.activeItemIndex=-1,this.selectionChangeSubscription=a.Subscription.EMPTY,this.dataSourceChangeSubscription=a.Subscription.EMPTY,this.optionSelectionChanges=a.defer(function(){return o.options?a.merge.apply(void 0,function n(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}(o.options.map(function(t){return t.selectionChange}))):o.ngZone.onStable.asObservable().pipe(c.take(1),c.switchMap(function(){return o.optionSelectionChanges}))})}return Object.defineProperty(t.prototype,"options",{get:function(){return this.nzDataSource?this.fromDataSourceOptions:this.fromContentOptions},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.optionsInit()},t.prototype.ngOnDestroy=function(){this.dataSourceChangeSubscription.unsubscribe(),this.selectionChangeSubscription.unsubscribe()},t.prototype.setVisibility=function(){this.showPanel=!!this.options.length,this.changeDetectorRef.markForCheck()},t.prototype.setActiveItem=function(t){var e=this.options.toArray()[t];e&&!e.active&&(this.activeItem=e,this.activeItemIndex=t,this.clearSelectedOptions(this.activeItem),this.activeItem.setActiveStyles(),this.changeDetectorRef.markForCheck())},t.prototype.setNextItemActive=function(){var t=this.activeItemIndex+1<=this.options.length-1?this.activeItemIndex+1:0;this.setActiveItem(t)},t.prototype.setPreviousItemActive=function(){var t=this.activeItemIndex-1<0?this.options.length-1:this.activeItemIndex-1;this.setActiveItem(t)},t.prototype.getOptionIndex=function(o){return this.options.reduce(function(t,e,n){return-1===t?o===e?n:-1:t},-1)},t.prototype.optionsInit=function(){var e=this;this.setVisibility(),this.subscribeOptionChanges();var t=this.nzDataSource?this.fromDataSourceOptions.changes:this.fromContentOptions.changes;this.dataSourceChangeSubscription=t.subscribe(function(t){!t.dirty&&e.isOpen&&setTimeout(function(){return e.setVisibility()}),e.subscribeOptionChanges()})},t.prototype.clearSelectedOptions=function(e,n){void 0===n&&(n=!1),this.options.forEach(function(t){t!==e&&(n&&t.deselect(),t.setInactiveStyles())})},t.prototype.subscribeOptionChanges=function(){var e=this;this.selectionChangeSubscription.unsubscribe(),this.selectionChangeSubscription=this.optionSelectionChanges.pipe(c.filter(function(t){return t.isUserInput})).subscribe(function(t){t.source.select(),t.source.setActiveStyles(),e.activeItem=t.source,e.activeItemIndex=e.getOptionIndex(e.activeItem),e.clearSelectedOptions(t.source,!0),e.selectionChange.emit(t.source)})},t.decorators=[{type:r.Component,args:[{selector:"nz-autocomplete",exportAs:"nzAutocomplete",preserveWhitespaces:!1,changeDetection:r.ChangeDetectionStrategy.OnPush,encapsulation:r.ViewEncapsulation.None,template:'<ng-template>\n  <div class="ant-select-dropdown ant-select-dropdown--single ant-select-dropdown-placement-bottomLeft"\n    #panel\n    [nzNoAnimation]="noAnimation?.nzNoAnimation"\n    [@slideMotion]="dropDownPosition"\n    [class.ant-select-dropdown-hidden]="!showPanel" [ngClass]="nzOverlayClassName" [ngStyle]="nzOverlayStyle">\n    <div style="overflow: auto;">\n      <ul class="ant-select-dropdown-menu  ant-select-dropdown-menu-root ant-select-dropdown-menu-vertical"\n        role="menu"\n        aria-activedescendant>\n        <ng-template *ngTemplateOutlet="nzDataSource ? optionsTemplate : contentTemplate"></ng-template>\n      </ul>\n    </div>\n  </div>\n  <ng-template #contentTemplate>\n    <ng-content></ng-content>\n  </ng-template>\n  <ng-template #optionsTemplate>\n    <nz-auto-option *ngFor="let option of nzDataSource" [nzValue]="option">{{option}}</nz-auto-option>\n  </ng-template>\n</ng-template>',animations:[l.slideMotion],styles:["\n      .ant-select-dropdown {\n        top: 100%;\n        left: 0;\n        position: relative;\n        width: 100%;\n        margin-top: 4px;\n        margin-bottom: 4px;\n      }\n    "]}]}],t.ctorParameters=function(){return[{type:r.ChangeDetectorRef},{type:r.NgZone},{type:l.NzNoAnimationDirective,decorators:[{type:r.Host},{type:r.Optional}]}]},t.propDecorators={nzWidth:[{type:r.Input}],nzOverlayClassName:[{type:r.Input}],nzOverlayStyle:[{type:r.Input}],nzDefaultActiveFirstOption:[{type:r.Input}],nzBackfill:[{type:r.Input}],nzDataSource:[{type:r.Input}],selectionChange:[{type:r.Output}],fromContentOptions:[{type:r.ContentChildren,args:[g,{descendants:!0}]}],fromDataSourceOptions:[{type:r.ViewChildren,args:[g]}],template:[{type:r.ViewChild,args:[r.TemplateRef]}],panel:[{type:r.ViewChild,args:["panel"]}],content:[{type:r.ViewChild,args:["content"]}]},u([l.InputBoolean(),h("design:type",Object)],t.prototype,"nzDefaultActiveFirstOption",void 0),u([l.InputBoolean(),h("design:type",Object)],t.prototype,"nzBackfill",void 0),t}(),C=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{declarations:[b,g,v,p],exports:[b,g,v,p],imports:[i.CommonModule,e.OverlayModule,s.FormsModule,l.NzAddOnModule,l.NzNoAnimationModule]}]}],t}();t.NzAutocompleteModule=C,t.NzAutocompleteComponent=b,t.getNzAutocompleteMissingPanelError=y,t.NZ_AUTOCOMPLETE_VALUE_ACCESSOR=f,t.NzAutocompleteTriggerDirective=v,t.NzOptionSelectionChange=m,t.NzAutocompleteOptionComponent=g,t.NzAutocompleteOptgroupComponent=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng-zorro-antd-auto-complete.umd.min.js.map